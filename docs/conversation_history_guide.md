# ğŸ“œ HÆ°á»›ng dáº«n Lá»‹ch sá»­ Há»™i thoáº¡i

## ğŸ¯ Tá»•ng quan

TÃ­nh nÄƒng **Lá»‹ch sá»­ há»™i thoáº¡i** cho phÃ©p báº¡n quáº£n lÃ½ toÃ n bá»™ cuá»™c há»™i thoáº¡i vá»›i AI Travel Assistant, bao gá»“m táº¡o má»›i, xem chi tiáº¿t, chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c há»™i thoáº¡i vÃ  tá»± Ä‘á»™ng Ä‘áº·t tÃªn thÃ´ng minh.

## âœ¨ TÃ­nh nÄƒng chÃ­nh

### ğŸ“‹ **Quáº£n lÃ½ Há»™i thoáº¡i**
- âœ… Xem danh sÃ¡ch táº¥t cáº£ há»™i thoáº¡i vá»›i thÃ´ng tin chi tiáº¿t
- âœ… Táº¡o há»™i thoáº¡i má»›i vá»›i 1 click
- âœ… Chuyá»ƒn Ä‘á»•i nhanh giá»¯a cÃ¡c há»™i thoáº¡i
- âœ… XÃ³a há»™i thoáº¡i khÃ´ng cáº§n thiáº¿t
- âœ… TÃ¬m kiáº¿m há»™i thoáº¡i theo tiÃªu Ä‘á»

### ğŸ¤– **Tá»± Ä‘á»™ng Ä‘áº·t tÃªn vá»›i LLM**
- âœ… AI tá»± Ä‘á»™ng táº¡o tiÃªu Ä‘á» dá»±a trÃªn tin nháº¯n Ä‘áº§u tiÃªn
- âœ… TiÃªu Ä‘á» ngáº¯n gá»n, sÃºc tÃ­ch, phÃ¹ há»£p vá»›i ná»™i dung
- âœ… Há»— trá»£ fallback náº¿u LLM khÃ´ng hoáº¡t Ä‘á»™ng
- âœ… Cáº­p nháº­t real-time vÃ o database

### ğŸ” **TÃ¬m kiáº¿m & Lá»c**
- âœ… TÃ¬m kiáº¿m theo tá»« khÃ³a trong tiÃªu Ä‘á»
- âœ… Lá»c theo thá»i gian (hÃ´m nay, 7 ngÃ y, 30 ngÃ y, 90 ngÃ y)
- âœ… Sáº¯p xáº¿p theo thá»i gian cáº­p nháº­t má»›i nháº¥t
- âœ… Hiá»ƒn thá»‹ thá»‘ng kÃª tá»•ng quan

## ğŸ“± CÃ¡ch sá»­ dá»¥ng

### ğŸš€ **Truy cáº­p Lá»‹ch sá»­ Há»™i thoáº¡i**

1. Má»Ÿ AI Travel Assistant
2. Trong menu bÃªn trÃ¡i, chá»n **"ğŸ“œ Lá»‹ch sá»­ há»™i thoáº¡i"**
3. Trang lá»‹ch sá»­ sáº½ hiá»ƒn thá»‹ vá»›i Ä‘áº§y Ä‘á»§ tÃ­nh nÄƒng

### â• **Táº¡o Há»™i thoáº¡i Má»›i**

1. Click button **"ğŸ†• Há»™i thoáº¡i má»›i"** (mÃ u xanh)
2. Há»‡ thá»‘ng tá»± Ä‘á»™ng táº¡o há»™i thoáº¡i vá»›i tiÃªu Ä‘á» táº¡m thá»i
3. Báº¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn vá» trang Chat
4. Khi gá»­i tin nháº¯n Ä‘áº§u tiÃªn, AI sáº½ tá»± Ä‘á»™ng Ä‘áº·t tÃªn cho há»™i thoáº¡i

**VÃ­ dá»¥ Auto-naming:**
```
ğŸ‘¤ User: "TÃ´i muá»‘n Ä‘i du lá»‹ch ÄÃ  Náºµng"
ğŸ¤– System: Äáº·t tÃªn -> "Du lá»‹ch ÄÃ  Náºµng"

ğŸ‘¤ User: "Thá»i tiáº¿t HÃ  Ná»™i hÃ´m nay tháº¿ nÃ o?"  
ğŸ¤– System: Äáº·t tÃªn -> "Thá»i tiáº¿t HÃ  Ná»™i"

ğŸ‘¤ User: "Äáº·t khÃ¡ch sáº¡n á»Ÿ Sapa"
ğŸ¤– System: Äáº·t tÃªn -> "Äáº·t khÃ¡ch sáº¡n Sapa"
```

### ğŸ’¬ **Má»Ÿ Há»™i thoáº¡i CÅ©**

1. Trong danh sÃ¡ch há»™i thoáº¡i, tÃ¬m há»™i thoáº¡i muá»‘n má»Ÿ
2. Click button **"ğŸ’¬ Má»Ÿ há»™i thoáº¡i"**
3. Há»‡ thá»‘ng sáº½:
   - Load toÃ n bá»™ lá»‹ch sá»­ chat
   - Chuyá»ƒn vá» trang Chat
   - Hiá»ƒn thá»‹ táº¥t cáº£ tin nháº¯n trÆ°á»›c Ä‘Ã³
   - Äáº·t há»™i thoáº¡i lÃ m "active"

### ğŸ” **TÃ¬m kiáº¿m Há»™i thoáº¡i**

1. Má»Ÿ section **"ğŸ” TÃ¬m kiáº¿m & Lá»c"**
2. **TÃ¬m kiáº¿m theo tá»« khÃ³a:**
   - Nháº­p tá»« khÃ³a vÃ o Ã´ "TÃ¬m kiáº¿m theo tiÃªu Ä‘á»"
   - Há»‡ thá»‘ng lá»c real-time
3. **Lá»c theo thá»i gian:**
   - Chá»n "HÃ´m nay", "7 ngÃ y qua", "30 ngÃ y qua", hoáº·c "90 ngÃ y qua"
   - Káº¿t há»£p Ä‘Æ°á»£c vá»›i tÃ¬m kiáº¿m tá»« khÃ³a

### ğŸ“‹ **Xem Chi tiáº¿t Há»™i thoáº¡i**

1. Click button **"ğŸ“‹ Chi tiáº¿t"** cá»§a há»™i thoáº¡i
2. Há»‡ thá»‘ng hiá»ƒn thá»‹:
   - **ThÃ´ng tin cÆ¡ báº£n:** TiÃªu Ä‘á», ID, thá»i gian táº¡o/cáº­p nháº­t
   - **Thá»‘ng kÃª:** Tá»•ng sá»‘ tin nháº¯n, tráº¡ng thÃ¡i hoáº¡t Ä‘á»™ng
   - **Preview:** 5 tin nháº¯n gáº§n nháº¥t vá»›i ná»™i dung rÃºt gá»n

### ğŸ—‘ï¸ **XÃ³a Há»™i thoáº¡i**

1. Click button **"ğŸ—‘ï¸ XÃ³a"** cá»§a há»™i thoáº¡i
2. Click láº§n 2 Ä‘á»ƒ xÃ¡c nháº­n (cÃ³ cáº£nh bÃ¡o)
3. Há»™i thoáº¡i vÃ  toÃ n bá»™ lá»‹ch sá»­ sáº½ bá»‹ xÃ³a vÄ©nh viá»…n

âš ï¸ **LÆ°u Ã½:** KhÃ´ng thá»ƒ khÃ´i phá»¥c sau khi xÃ³a!

## ğŸ“Š Hiá»ƒn thá»‹ ThÃ´ng tin

### ğŸ·ï¸ **Tháº» Há»™i thoáº¡i**

Má»—i há»™i thoáº¡i hiá»ƒn thá»‹:

```
ğŸŸ¢ TiÃªu Ä‘á» Há»™i thoáº¡i                    ğŸŸ¢ Äang hoáº¡t Ä‘á»™ng
Preview: Tin nháº¯n Ä‘áº§u tiÃªn cá»§a ngÆ°á»i dÃ¹ng...

ğŸ“ 5 tin nháº¯n    ğŸ•’ 2 giá» trÆ°á»›c    ğŸ“… Táº¡o: 14/08/2025 15:30
```

**Ã nghÄ©a mÃ u sáº¯c:**
- **ğŸŸ¢ Xanh lÃ¡:** Há»™i thoáº¡i Ä‘ang hoáº¡t Ä‘á»™ng
- **âšª XÃ¡m:** Há»™i thoáº¡i khÃ´ng hoáº¡t Ä‘á»™ng
- **Viá»n xanh:** Há»™i thoáº¡i Ä‘Æ°á»£c chá»n

### ğŸ“ˆ **Thá»‘ng kÃª Tá»•ng quan**

Äáº§u trang hiá»ƒn thá»‹:
- **Tá»•ng sá»‘ há»™i thoáº¡i:** Sá»‘ lÆ°á»£ng há»™i thoáº¡i Ä‘Ã£ táº¡o
- **Button lÃ m má»›i:** Cáº­p nháº­t danh sÃ¡ch má»›i nháº¥t
- **Button táº¡o má»›i:** Nhanh chÃ³ng táº¡o há»™i thoáº¡i

## ğŸ”„ **Workflow HoÃ n chá»‰nh**

### ğŸ“ **Luá»“ng Táº¡o Há»™i thoáº¡i Má»›i**

```mermaid
graph TD
    A[Click 'Há»™i thoáº¡i má»›i'] --> B[Táº¡o vá»›i tiÃªu Ä‘á» táº¡m]
    B --> C[Chuyá»ƒn vá» Chat]
    C --> D[User gá»­i tin nháº¯n Ä‘áº§u tiÃªn]
    D --> E[AI phÃ¢n tÃ­ch ná»™i dung]
    E --> F[LLM táº¡o tiÃªu Ä‘á» phÃ¹ há»£p]
    F --> G[Cáº­p nháº­t tiÃªu Ä‘á» vÃ o DB]
    G --> H[HoÃ n thÃ nh]
```

### ğŸ’¬ **Luá»“ng Má»Ÿ Há»™i thoáº¡i CÅ©**

```mermaid
graph TD
    A[Click 'Má»Ÿ há»™i thoáº¡i'] --> B[Load history tá»« DB]
    B --> C[Chuyá»ƒn vá» Chat]
    C --> D[Hiá»ƒn thá»‹ táº¥t cáº£ tin nháº¯n]
    D --> E[Äáº·t lÃ m active conversation]
    E --> F[Sáºµn sÃ ng chat tiáº¿p]
```

## ğŸ¤– **Chi tiáº¿t Auto-naming**

### ğŸ§  **CÃ¡ch LLM Äáº·t tÃªn**

**Input:** Tin nháº¯n Ä‘áº§u tiÃªn cá»§a user
**Process:** 
1. PhÃ¢n tÃ­ch Ã½ Ä‘á»‹nh vÃ  chá»§ Ä‘á» chÃ­nh
2. TrÃ­ch xuáº¥t Ä‘á»‹a Ä‘iá»ƒm, hoáº¡t Ä‘á»™ng quan trá»ng
3. Táº¡o tiÃªu Ä‘á» 3-8 tá»«, sÃºc tÃ­ch
4. Sá»­ dá»¥ng tiáº¿ng Viá»‡t, dá»… hiá»ƒu

**Output:** TiÃªu Ä‘á» ngáº¯n gá»n

### ğŸ“ **VÃ­ dá»¥ Auto-naming**

| Tin nháº¯n User | TiÃªu Ä‘á» Ä‘Æ°á»£c táº¡o |
|---------------|------------------|
| "Xin chÃ o, tÃ´i muá»‘n Ä‘i du lá»‹ch ÄÃ  Náºµng 3 ngÃ y" | "Du lá»‹ch ÄÃ  Náºµng" |
| "Kiá»ƒm tra thá»i tiáº¿t HÃ  Ná»™i hÃ´m nay" | "Thá»i tiáº¿t HÃ  Ná»™i" |
| "GiÃºp tÃ´i Ä‘áº·t khÃ¡ch sáº¡n á»Ÿ Sapa cho ngÃ y 25/12" | "Äáº·t khÃ¡ch sáº¡n Sapa" |
| "TÃ´i muá»‘n thuÃª xe tá»« HÃ  Ná»™i Ä‘i Háº¡ Long" | "ThuÃª xe HÃ  Ná»™i - Háº¡ Long" |
| "LÃªn káº¿ hoáº¡ch du lá»‹ch PhÃº Quá»‘c" | "Káº¿ hoáº¡ch PhÃº Quá»‘c" |
| "CÃ³ gÃ¬ hay á»Ÿ Há»“ ChÃ­ Minh?" | "KhÃ¡m phÃ¡ Há»“ ChÃ­ Minh" |

### ğŸ”„ **Fallback Mechanism**

Náº¿u LLM khÃ´ng hoáº¡t Ä‘á»™ng:
1. **Keyword detection:** TÃ¬m tá»« khÃ³a chÃ­nh
2. **Pattern matching:** Nháº­n diá»‡n máº«u cÃ¢u
3. **Default naming:** TiÃªu Ä‘á» generic

**Fallback Examples:**
- Chá»©a "thá»i tiáº¿t" â†’ "Thá»i tiáº¿t"  
- Chá»©a "Ä‘áº·t" + "khÃ¡ch sáº¡n" â†’ "Äáº·t khÃ¡ch sáº¡n"
- Chá»©a tÃªn Ä‘á»‹a danh â†’ "Du lá»‹ch [Äá»‹a danh]"
- Máº·c Ä‘á»‹nh â†’ "Há»™i thoáº¡i du lá»‹ch"

## âš™ï¸ **Cáº¥u hÃ¬nh & TÃ¹y chá»‰nh**

### ğŸ—„ï¸ **Database Storage**

Táº¥t cáº£ dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trong SQLite:
- **conversations:** ThÃ´ng tin há»™i thoáº¡i
- **conversation_history:** Chi tiáº¿t tá»«ng tin nháº¯n
- **Indexes:** Tá»‘i Æ°u hÃ³a truy váº¥n theo thá»i gian

### ğŸ”§ **Session State Management**

```python
# Navigation state
st.session_state.selected_page = "ğŸ“œ Lá»‹ch sá»­ há»™i thoáº¡i"

# Conversation state  
st.session_state.active_conversation_id = "uuid-here"
st.session_state.conversation_needs_naming = True

# Chat state
st.session_state.messages = [...] 
st.session_state.chat_history = [...]
```

## ğŸš¨ **Troubleshooting**

### â“ **CÃ¢u há»i thÆ°á»ng gáº·p**

**Q: Táº¡i sao há»™i thoáº¡i khÃ´ng Ä‘Æ°á»£c Ä‘áº·t tÃªn tá»± Ä‘á»™ng?**
A: 
- Kiá»ƒm tra káº¿t ná»‘i internet vÃ  API key
- LLM cÃ³ thá»ƒ Ä‘ang báº£o trÃ¬, sá»­ dá»¥ng fallback
- Xem log console Ä‘á»ƒ debug

**Q: LÃ m sao Ä‘á»ƒ khÃ´i phá»¥c há»™i thoáº¡i Ä‘Ã£ xÃ³a?**
A: KhÃ´ng thá»ƒ khÃ´i phá»¥c sau khi xÃ³a. HÃ£y cáº©n tháº­n khi xÃ³a.

**Q: Tá»‘i Ä‘a cÃ³ thá»ƒ táº¡o bao nhiÃªu há»™i thoáº¡i?**
A: KhÃ´ng giá»›i háº¡n, nhÆ°ng nÃªn dá»n dáº¹p Ä‘á»‹nh ká»³ Ä‘á»ƒ tá»‘i Æ°u hiá»‡u suáº¥t.

**Q: Há»™i thoáº¡i cÃ³ Ä‘Æ°á»£c backup khÃ´ng?**  
A: Táº¥t cáº£ data trong SQLite database cÃ³ thá»ƒ backup thá»§ cÃ´ng.

### ğŸ› **Lá»—i thÆ°á»ng gáº·p**

**"KhÃ´ng thá»ƒ táº£i há»™i thoáº¡i"**
- Kiá»ƒm tra file database tá»“n táº¡i
- Restart á»©ng dá»¥ng
- XÃ³a cache browser

**"LLM naming tháº¥t báº¡i"**
- Sá»­ dá»¥ng fallback naming tá»± Ä‘á»™ng
- CÃ³ thá»ƒ rename thá»§ cÃ´ng sau
- Kiá»ƒm tra Azure OpenAI API key

## ğŸ¯ **Best Practices**

### âœ… **NÃªn lÃ m**
- Sá»­ dá»¥ng tá»« khÃ³a mÃ´ táº£ rÃµ rÃ ng trong tin nháº¯n Ä‘áº§u tiÃªn
- Äá»‹nh ká»³ dá»n dáº¹p há»™i thoáº¡i cÅ© khÃ´ng dÃ¹ng
- Táº­n dá»¥ng tÃ­nh nÄƒng tÃ¬m kiáº¿m khi cÃ³ nhiá»u há»™i thoáº¡i
- Backup database Ä‘á»‹nh ká»³

### âŒ **KhÃ´ng nÃªn**
- Táº¡o quÃ¡ nhiá»u há»™i thoáº¡i trÃ¹ng láº·p ná»™i dung
- XÃ³a há»™i thoáº¡i quan trá»ng mÃ  chÆ°a backup
- Dá»±a hoÃ n toÃ n vÃ o auto-naming, cÃ³ thá»ƒ cáº§n chá»‰nh sá»­a
- Bá» qua viá»‡c dá»n dáº¹p há»™i thoáº¡i cÅ©

## ğŸ“ **Há»— trá»£**

Náº¿u gáº·p váº¥n Ä‘á»:
1. Kiá»ƒm tra logs trong console
2. Restart á»©ng dá»¥ng  
3. Kiá»ƒm tra database file: `data/travel_assistant.db`
4. BÃ¡o lá»—i vá»›i thÃ´ng tin chi tiáº¿t

---

## ğŸ‰ **TÃ­nh nÄƒng Ä‘Æ°á»£c há»— trá»£**

âœ… **ÄÃ£ hoÃ n thÃ nh:**
- Táº¡o/xÃ³a há»™i thoáº¡i
- Auto-naming vá»›i LLM  
- TÃ¬m kiáº¿m & lá»c
- Load/save lá»‹ch sá»­ chat
- Navigation giá»¯a cÃ¡c trang
- Database integration
- Error handling & fallback

ğŸ”® **Sáº¯p tá»›i:**
- Rename há»™i thoáº¡i thá»§ cÃ´ng
- Export/import há»™i thoáº¡i
- Conversation templates
- Search trong ná»™i dung tin nháº¯n
- Conversation analytics

---

ğŸ’¡ **Tip:** Sá»­ dá»¥ng tÃ­nh nÄƒng nÃ y Ä‘á»ƒ tá»• chá»©c cÃ¡c chuyáº¿n du lá»‹ch khÃ¡c nhau thÃ nh nhá»¯ng cuá»™c há»™i thoáº¡i riÃªng biá»‡t, giÃºp báº¡n dá»… dÃ ng quáº£n lÃ½ vÃ  tham kháº£o thÃ´ng tin sau nÃ y!